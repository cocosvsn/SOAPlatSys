<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<!-- 
    Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping package="com.soaplat.cmsmgr.bean">

    <!-- get max PROGFILEID of same program-->	
	<query name="select_maxprogfileid">
		<![CDATA[select max(i.progfileid) from ProgramFiles i where i.progfileid like :id]]>
	</query>
	<query name="select_programidfiletypeid">
		<![CDATA[select distinct(i) from ProgramFiles i where i.programid = :programid and i.filetypeid = :filetypeid]]>
	</query>
	
    <!-- Edited by Andy at 20091029 -->
    <!-- get cmsServices by programCategoryId -->
	<query name="select_cmsServicesByProgramCategoryId">
		<![CDATA[
		select distinct(cs) 
		from CmsService cs, SrvProgClass spc 
		where cs.srvid = spc.srvid 
		and spc.genre = :genre 
		]]>
	</query>
	
	<!-- get PPColumnRels by Productid and Columnclassid -->
	<query name="select_ppColumnRelsByProductIdAndColumnclassid">
		<![CDATA[
		select distinct(pcr) 
		from PPColumnRel pcr 
		where pcr.productid = :productid 
		and pcr.columnclassid = :columnclassid 
		]]>
	</query>
	
	<!-- get PpSrvPdtRels by Productid and ProductCategoryId -->
	<query name="select_ppSrvPdtRelsByProductIdAndProductCategoryId">
		<![CDATA[
		select distinct(pspr) 
		from PpSrvPdtRel pspr 
		where pspr.productid = :productid 
		and pspr.productCategoryId = :productCategoryId 
		]]>
	</query>
	
	<!-- get ProgramFileses by ProgramId and fileTypeId -->
	<query name="select_programFilesesByProgramIdAndFileTypeId">
		<![CDATA[
		select distinct(pf) 
		from ProgramFiles pf 
		where pf.programid = :programid 
		and pf.filetypeid = :filetypeid 
		]]>
	</query>
	
	<!-- get ProgPPRels by Productid and Programid 20091102 -->
	<query name="select_progPPRelsByProductidAndProgramid">
		<![CDATA[
		select distinct(pppr) 
		from ProgPPRel pppr 
		where pppr.productid = :productid 
		and pppr.programid = :programid 
		]]>
	</query>
	
	<!-- get PackageFileses by Productid, Progfileid and Programid 20091102 -->
	<query name="select_packageFilesesByProductidProgfileidAndProgramid">
		<![CDATA[
		select distinct(pf) 
		from PackageFiles pf 
		where pf.productid = :productid 
		and pf.progfileid = :progfileid 
		and pf.programid = :programid 
		]]>
	</query>
	
	<!-- get ProgSrvRels by Productid and Srvid 20091102 -->
	<query name="select_progSrvRelsByProductidAndSrvid">
		<![CDATA[
		select distinct(psr) 
		from ProgSrvRel psr 
		where psr.productid = :productid 
		and psr.srvid = :srvid 
		]]>
	</query>
	
	<!-- get progPackages by Srvid 20091104 13:14 -->
	<query name="select_progPackagesBySrvid">
		<![CDATA[
		select pp 
		from ProgPackage pp, ProgSrvRel psr 
		where psr.srvid = :srvid 
		and psr.productid = pp.productid 
		]]>
	</query>
	
	<!-- get programInfos by productid 20091104 13:14 -->
	<query name="select_programInfosByProductid">
		<![CDATA[
		select new com.soaplat.cmsmgr.bean.ProgramInfo(p.programid, p.title, p.epicodename, p.description, p.genre, p.progproperty, p.progtype, p.dsflag, p.proginfoxml, p.inputmanid, p.inputtime, pf.filecode, p.styleid)
		from ProgramInfo p, ProgramFiles as pf, ProgPPRel ppr 
		where p.programid = ppr.programid 
		and p.programid = pf.programid
		and ppr.productid = :productid 
		]]>
	</query>
	
	<!-- get cmsServices by productid 20091104 13:14 -->
	<query name="select_cmsServicesByProductid">
		<![CDATA[
		select cs 
		from CmsService cs, ProgSrvRel psr 
		where cs.srvid = psr.srvid 
		and psr.productid = :productid 
		]]>
	</query>
	
	<!-- get ProgListDetails by pdate and Columnclassid 20091110 10:53 
	<query name="select_progListDetailsByPdateAndColumnclassid">
		<![CDATA[
		select pld 
		from ProgListDetail pld 
		where pld.pdate = :pdate 
		and pld.columnclassid = :columnclassid 
		order by pld.lnum
		]]>
	</query>-->
	
	<!-- get progListDetails By Pdate And Productid And columnclassid 20091110 12:44 
	<query name="select_progListDetailsByPdateAndProductidAndColumnclassid">
		<![CDATA[
		select pld 
		from ProgListDetail pld 
		where pld.pdate = :pdate 
		and pld.productid = :productid 
		and pld.columnclassid = :columnclassid
		]]>
	</query>-->
	
	
	
	<!-- get PortalColumns by defcatseq 20091110 10:44 -->
	<query name="select_PortalColumnsByDefcatseq">
		<![CDATA[
		select pc 
		from PortalColumn pc 
		where pc.defcatseq like :defcatseq 
		order by pc.displayorder
		]]>
	</query>
	
	<!-- get ProgListDetails by pdate and defcatseq 20091106 16:59 
	<query name="select_progListDetailsByPdateAndDefcatseq">
		<![CDATA[
		select pld 
		from ProgListDetail pld 
		where pld.pdate = :pdate 
		and pld.defcatseq like :defcatseq 
		order by pld.columnclassid, pld.lnum
		]]>
	</query>-->
	
	<!-- get PortalColumns By Srvid 20091108 10:39 -->
	<query name="select_PortalColumnsBySrvid">
		<![CDATA[
		select pc 
		from PortalColumn pc,SrvColumn sc 
		where pc.columnclassid = sc.columnclassid 
		and sc.srvid = :srvid 
		]]>
	</query>
	
	<!-- get ProductCategories By Srvid 20091110 15:43 -->
	<query name="select_ProductCategoriesBySrvid">
		<![CDATA[
		select pc.productCategoryId,pc.description,pc.productTypeId,pc.priceId,pc.introduction,
		pc.billingTypeId,pc.contentCategoryId,pc.days,pc.counts,pc.seconds,pc.validFrom,
		pc.validTo,pc.createUser,pc.createDate,p.description,p.price,sa.smsAccountId,
		sa.description,sa.debitCredit,pt.description,pt.hardwareTag,
		cc.description,bt.description,bt.introduction 
		from com.cbs.cbsmgr.bean.ProductCategory pc, com.cbs.cbsmgr.bean.Price p, 
		com.cbs.cbsmgr.bean.SmsAccount sa, com.cbs.cbsmgr.bean.ProductType pt, 
		com.cbs.cbsmgr.bean.ContentCategory cc, com.cbs.cbsmgr.bean.BillingType bt, 
		SrvProduct sp 
		where pc.productCategoryId = sp.productCategoryId 
		and sp.srvid = :srvid 
		and pc.priceId = p.priceId 
		and p.smsAccountId = sa.smsAccountId 
		and pc.productTypeId = pt.productTypeId 
		and pc.contentCategoryId = cc.contentCategoryId 
		and pc.billingTypeId = bt.billingTypeId 
		]]>
	</query>
	<!-- get ProductCategories By Srvid 20091108 10:39 
	<query name="select_ProductCategoriesBySrvid">
		<![CDATA[
		select pc 
		from com.cbs.cbsmgr.bean.ProductCategory pc, SrvProduct sp 
		where pc.productCategoryId = sp.productCategoryId 
		and sp.srvid = :srvid 
		]]>
	</query>-->
	
	<!-- get ProgListDetails By Columnclassid And State1 20091109 16:04 
	<query name="select_ProgListDetailsByColumnclassidAndState1NotEqual">
		<![CDATA[
		select pld 
		from ProgListDetail pld 
		where pld.columnclassid = :columnclassid 
		and pld.state1 <> :state1 
		]]>
	</query>-->
	
	<!-- get CmsServices By Columnclassid 20091109 17:13 -->
	<query name="select_CmsServicesByColumnclassid">
		<![CDATA[
		select cs 
		from CmsService cs, SrvColumn sc 
		where cs.srvid = sc.srvid 
		and sc.columnclassid = :columnclassid 
		]]>
	</query>
	
	<!-- get ProgPackages By Columnclassid 20091109 17:13 -->
	<query name="select_ProgPackagesByColumnclassid">
		<![CDATA[
		select pp 
		from ProgPackage pp, PPColumnRel ppr 
		where pp.productid = ppr.productid 
		and ppr.columnclassid = :columnclassid 
		]]>
	</query>
	
	<!-- get CmsServices By ProductCategoryId 20091111 15:59 -->
	<query name="select_CmsServicesByProductCategoryId">
		<![CDATA[
		select cs 
		from CmsService cs, SrvProduct sp 
		where cs.srvid = sp.srvid 
		and sp.productCategoryId = :productCategoryId 
		]]>
	</query>
	
	<!-- get FunResources By flowactivityidparent 20091112 14:03 -->
	<query name="select_FunResourcesByFlowactivityidparent">
		<![CDATA[
		select fr,fao.state2 
		from com.soaplat.sysmgr.bean.FunResource fr, FlowActivityOrder fao 
		where fr.funcid = fao.flowactivityidchild 
		and fao.flowactivityidparent = :flowactivityidparent 
		]]>
	</query>
	
	<!-- get Operators By Funcid 20091112 14:10 -->
	<query name="select_OperatorsByFuncid">
		<![CDATA[
		select distinct(o) 
		from com.soaplat.sysmgr.bean.RoleFunRel rfr, com.soaplat.sysmgr.bean.RoleOperRel ror,
		com.soaplat.sysmgr.bean.Operator o 
		where rfr.funcid = :funcid 
		and rfr.roleid = ror.roleid 
		and ror.operatorid = o.operatorid 
		]]>
	</query>
	
	<!-- get ProgLists By idAct And pop 20091113 15:33 -->
	<query name="select_ProgListsByIdActAndPop">
		<![CDATA[
		select distinct(pl) 
		from ProgList pl 
		where pl.idAct = :idAct 
		]]>
	</query>
	
	<!-- get ProgListDetails By date 20091203 10:31 -->
	<query name="select_ProgListDetailsByDate">
		<![CDATA[
		select distinct(pld) 
		from ProgListDetail pld 
		where pld.validFrom <= :dateB 
		and pld.validTo >= :dateE
		]]>
	</query>
	
	<!-- get PackStyles By ProgType And StyleType 20091203 15:38 -->
	<query name="select_PackStylesByProgTypeAndStyleType">
		<![CDATA[
		select ps 
		from PackStyle ps 
		where ps.progtype = :progtype 
		and ps.styletype = :styletype order by ps.sytlecreatedate
		]]>
	</query>
	
	<!-- get PortalRoleOperRels By roleid And columnclassid 20091204 12:58 -->
	<query name="select_PortalRoleOperRelsByRoleidAndColumnclassid">
		<![CDATA[
		select pror 
		from PortalRoleOperRel pror 
		where pror.roleid = :roleid 
		and pror.columnclassid = :columnclassid
		]]>
	</query>
	
	<!-- get PortalColumns By Roleid 20091204 12:58 -->
	<query name="select_PortalColumnsByRoleid">
		<![CDATA[
		select pc 
		from PortalRoleOperRel pror, PortalColumn pc 
		where pror.columnclassid = pc.columnclassid 
		and pror.roleid = :roleid
		]]>
	</query>
	
	<!-- get ProgramFileses By Date 20091206 17:43 -->
	<query name="select_ProgramFilesesByDate">
		<![CDATA[
		select prf,pp,pld 
		from ProgListDetail pld, ProgPackage pp, PackageFiles pkf, ProgramFiles prf 
		where pld.productid = pp.productid 
		and pp.productid = pkf.productid 
		and pkf.progfileid = prf.progfileid 
		and pld.validFrom <= :validFrom 
		and pld.validTo > :validTo
		]]>
	</query>
	
	<!-- get ProgListDetails by Date and defcatseq 20091207 13:53 -->
	<query name="select_progListDetailsByDateAndDefcatseq">
		<![CDATA[
		select pld, fr.funcname 
		from ProgListDetail pld, com.soaplat.sysmgr.bean.FunResource fr 
		where pld.validFrom <= :validFrom 
		and pld.validTo > :validTo 
		and pld.defcatseq like :defcatseq 
		and pld.idAct = fr.funcid 
		order by pld.columnclassid, pld.lnum
		]]>
	</query>
	
	<!-- Edited by Andy at 20100115 9:30 -->
	<!-- 根据日期和栏目单code序列，查询，得到栏目单详细和节目包 , fr.funcname , com.soaplat.sysmgr.bean.FunResource fr and pld.idAct = fr.funcid -->
	<query name="select_progListDetailsProgPackagesByDateAndDefcatseq">
		<![CDATA[
		select pld, pp 
		from ProgListDetail pld, ProgPackage pp 
		where pld.validFrom <= :validFrom 
		and pld.validTo > :validTo 
		and pld.defcatseq like :defcatseq 
		and pld.productid = pp.productid 
		order by pld.columnclassid, pld.lnum
		]]>
	</query>
	
	<!-- Edited by Andy at 20100427 17:03 -->
	<!-- 根据日期和栏目单code序列，查询当日上线的节目包，得到栏目单详细和节目包 -->
	<query name="select_todayOnlineProgListDetailsByDateAndDefcatseq">
		<![CDATA[
		select pld, pp 
		from ProgListDetail pld, ProgPackage pp 
		where pld.validFrom >= :validFrom 
		and pld.validFrom <= :validTo 
		and pld.defcatseq like :defcatseq 
		and pld.productid = pp.productid 
		order by pld.columnclassid, pld.lnum
		]]>
	</query>
	
	<!-- Edited by Andy at 20100109 12:56 -->
	<!-- get ProgListDetails by Date -->
	<query name="select_progListDetailsByDate">
		<![CDATA[
		select pld, fr.funcname 
		from ProgListDetail pld, com.soaplat.sysmgr.bean.FunResource fr 
		where pld.validFrom <= :validFrom 
		and pld.validTo > :validTo 
		and pld.idAct = fr.funcid 
		order by pld.columnclassid, pld.lnum
		]]>
	</query>
	
	<!-- get Leaf PortalColumns By Defcatseq 20091207 13:53 -->
	<query name="select_LeafPortalColumnsByDefcatseq">
		<![CDATA[
		select pc 
		from PortalColumn pc 
		where pc.defcatseq like :defcatseq 
		and pc.isleaf = 'Y' 
		]]>
	</query>
	
	<!-- Edited by Andy at 20100114 16:53 -->
	<!-- 根据序列查询所有栏目叶子节点(有效的) -->
	<query name="select_ValidLeafPortalColumnsByDefcatseq">
		<![CDATA[
		select pc 
		from PortalColumn pc 
		where pc.defcatseq like :defcatseq 
		and pc.isleaf = 'Y' 
		and pc.ispublish = 0 
		]]>
	</query>
	
	<!-- 根据scheduleDate、defcatseq查询，得到progListMangDetails,Edited by Andy at 20091228 14:17 -->
	<query name="select_ProgListMangDetailsByScheduleDateAndDefcatseq">
		<![CDATA[
		select plmd 
		from PortalColumn pc, ProgListMangDetail plmd 
		where plmd.scheduledate = :scheduledate 
		and plmd.columnclassid = pc.columnclassid 
		and pc.defcatseq like :defcatseq 
		and pc.isleaf = 'Y' 
		]]>
	</query>
	
	<!-- Edited by Andy at 20100121 14:12 -->
	<!-- 根据scheduleDate、defcatseq查询，得到本地progListMangDetails -->
	<query name="select_LocalProgListMangDetailsByScheduleDateAndDefcatseq">
		<![CDATA[
		select plmd 
		from PortalColumn pc, ProgListMangDetail plmd 
		where plmd.scheduledate = :scheduledate 
		and plmd.columnclassid = pc.columnclassid 
		and plmd.state2 = 1 
		and pc.defcatseq like :defcatseq 
		and pc.isleaf = 'Y' 
		]]>
	</query>
	
	<!-- 根据scheduleDate、defcatseq查询，得到progListMangDetails,Edited by Andy at 20091228 16:21 -->
	<query name="select_NextIdActsByCurrentIdActAndState2">
		<![CDATA[
		select fao 
		from FlowActivityOrder fao 
		where fao.flowactivityidparent = :flowactivityidparent 
		and fao.state2 = :state2
		]]>
	</query>
	
	<!-- 根据scheduleDate、defcatseq查询，得到progListMangDetails,Edited by Andy at 20091228 16:21 -->
	<query name="select_LastIdActsByCurrentIdActAndState2">
		<![CDATA[
		select fao 
		from FlowActivityOrder fao 
		where fao.flowactivityidchild = :flowactivityidchild 
		and fao.state2 = :state2
		]]>
	</query>
	
	<!-- 根据scheduleDate和Columnclassid，查询得到progListMangDetails,Edited by Andy at 20091229 13:28 -->
	<query name="select_ProgListMangDetailsByScheduleDateAndColumnclassid">
		<![CDATA[
		select plmd 
		from ProgListMangDetail plmd 
		where plmd.scheduledate = :scheduledate 
		and plmd.columnclassid = :columnclassid 
		]]>
	</query>
	
	<!-- 根据scheduledate和columnclassid，查询TPROGLISTDETAIL，得到proglistdetail和progpackage,Edited by Andy at 20091230 15:22 -->
	<query name="select_ProgListDetailsByScheduledateAndColumnclassid">
		<![CDATA[
		select pld, pp 
		from ProgListDetail pld, ProgPackage pp 
		where pld.validFrom <= :validFrom 
		and pld.validTo > :validTo 
		and pld.columnclassid = :columnclassid 
		and pp.productid = pld.productid 
		]]>
	</query>
	
	<!-- 根据节目包id、filecode、filetype，查询packagefiles、programfiles表，得到file, Edited by Andy at 20100106 16:05 -->
	<query name="select_ProgramFilesesByProductidFilecodeFiletype">
		<![CDATA[
		select pmf 
		from ProgramFiles pmf, PackageFiles ppf 
		where ppf.productid = :productid 
		and ppf.progfileid = pmf.progfileid 
		and pmf.filecode = :filecode 
		and pmf.filetypeid = :filetypeid
		order by pmf.inputtime desc
		]]>
	</query>
	
	<!-- Edited by Andy at 20100108 10:40 -->
	<!-- 根据日期，查询栏目单总表或者主表管理表TPROGLISTMANG -->
	<query name="select_ProgListMangsByDate">
		<![CDATA[
		select plm, fa 
		from ProgListMang plm, FlowAction fa 
		where plm.scheduledate >= :datefrom 
		and plm.scheduledate <= :dateto 
		and plm.idAct = fa.actionid 
		order by plm.scheduledate
		]]>
	</query>
	
	<!-- Edited by Andy at 20100108 10:40 -->
	<!-- 根据栏目单总表或者主表管理表TPROGLISTMANG，查询栏目单分表管理表(TPROGLISTMANGDETAIL) -->
	<query name="select_ProgListMangDetailsByScheduledate">
		<![CDATA[
		select plmd, pc, fa 
		from ProgListMangDetail plmd,PortalColumn pc, FlowAction fa 
		where plmd.scheduledate = :scheduledate 
		and plmd.idAct = fa.actionid 
		and pc.columnclassid = plmd.columnclassid 
		order by plmd.columnclassid
		]]>
	</query>
	
	<!-- Edited by Andy at 20100121 13:47 -->
	<!-- 根据本地栏目单总表或者主表管理表TPROGLISTMANG，查询栏目单分表管理表(TPROGLISTMANGDETAIL) -->
	<query name="select_LocalProgListMangDetailsByScheduledate">
		<![CDATA[
		select plmd, pc, fa 
		from ProgListMangDetail plmd,PortalColumn pc, FlowAction fa 
		where plmd.scheduledate = :scheduledate 
		and plmd.idAct = fa.actionid 
		and plmd.state2 = 1 
		and pc.columnclassid = plmd.columnclassid 
		and pc.validFlag = 0 
		order by plmd.columnclassid
		]]>
	</query>
	
	<!-- Edited by Andy at 20100108 13:53 -->
	<!-- 根据 Date、defcatseq、Operation，查询得到栏目单详细 		com.soaplat.sysmgr.bean.FunResource fr,-->
	<!-- PortalRoleOperRel pror, com.soaplat.sysmgr.bean.RoleOperRel ror 		and ror.operatorid = :operatorid  -->
	<!-- and pror.roleid = ror.roleid  and pror.columnclassid = pld.columnclassid  -->
	<query name="select_progListDetailsByDateAndDefcatseqAndOper">
		<![CDATA[
		select pld, pp 
		from ProgListDetail pld, ProgPackage pp 
		where pld.validFrom <= :validFrom 
		and pld.validTo > :validTo 
		and pld.defcatseq like :defcatseq 
		and pld.productid = pp.productid 
		order by pld.columnclassid, pld.lnum 
		]]>
	</query>
	
	<!-- Edited by Andy at 20100223 16:10 -->
	<!-- 根据 Date、defcatseq、Operation，查询得到栏目单详细 -->
	<query name="select_progListDetailsByDateAndDefcatseqAndOperWithoutProgPackage">
		<![CDATA[
		select pld 
		from ProgListDetail pld, PortalColumn pc 
		where pld.validFrom <= :validFrom 
		and pld.validTo > :validTo 
		and pld.defcatseq like :defcatseq 
		and pld.columnclassid = pc.columnclassid 
		and pc.validFlag = 0
		order by pld.columnclassid, pld.lnum, pld.productid 
		]]>
	</query>
	
	<!-- Edited by Andy at 20100111 12:48 -->
	<!-- 根据 节目包id和存储体等级，查询得到文件列表 -->
	<query name="select_programfilesesByProductidAndStclasscode">
		<![CDATA[
		select pmf,amspr,amsg,amsd 
		from PackageFiles pkf,ProgramFiles pmf,
		com.soaplat.amsmgr.bean.AmsStorage amsg,
		com.soaplat.amsmgr.bean.AmsStoragePrgRel amspr,
		com.soaplat.amsmgr.bean.AmsStorageDir amsd,
		com.soaplat.amsmgr.bean.AmsStorageClass amsc 
		where pkf.productid = :productid 
		and amsc.stclasscode = :stclasscode 
		and pkf.progfileid = pmf.progfileid 
		and pmf.progfileid = amspr.progfileid 
		and amspr.stdirglobalid = amsd.stdirglobalid 
		and amsc.stclassglobalid = amsg.stclassglobalid 
		and amsg.stglobalid = amspr.stglobalid 
		]]>
	</query>
	
	<!-- Edited by Andy at 20100112 22:27 -->
	<!-- 根据 节目包id，查询得到上线的栏目单详细列表 -->
	<query name="select_onlineProgListDetailsByProductid">
		<![CDATA[
		select pld 
		from ProgListDetail pld 
		where pld.productid = :productid 
		and pld.validFlag = 0 
		]]>
	</query>
	
	<!-- Edited by Andy at 20100114 16:26 -->
	<!-- 根据栏目code序列，查询，得到所有有效的需要生成发布文件的栏目 -->
	<query name="select_AllPublishPortalColumnsByDefcatseq">
		<![CDATA[
		select pc 
		from PortalColumn pc 
		where pc.defcatseq like :defcatseq 
		and pc.validFlag = 0 
		and pc.ispublish = 0 
		]]>
	</query>
	
	<!-- Edited by Andy at 20100115 10:04 -->
	<!-- 根据 文件code 和 存储体等级，查询得到文件存放目标路径 -->
	<query name="select_DestPathByFilecodeStclasscode">
		<![CDATA[
		select amsg,amsd,amsc 
		from com.soaplat.amsmgr.bean.AmsStorage amsg,
		com.soaplat.amsmgr.bean.AmsStorageDir amsd,
		com.soaplat.amsmgr.bean.AmsStorageClass amsc 
		where amsd.filecode = :filecode 
		and amsc.stclasscode = :stclasscode 
		and amsc.stclassglobalid = amsg.stclassglobalid 
		and amsg.stglobalid = amsd.stglobalid 
		]]>
	</query>
	
	<!-- Edited by Andy at 20100115 14:23 -->
	<!-- 根据文件ID 和 存储体等级，查询，得到文件存放目标路径 -->
	<query name="select_SourcePathByProgfileidStclasscode">
		<![CDATA[
		select pmf,amsg,amspr,amsd,amsc 
		from ProgramFiles pmf,
		com.soaplat.amsmgr.bean.AmsStorage amsg,
		com.soaplat.amsmgr.bean.AmsStoragePrgRel amspr,
		com.soaplat.amsmgr.bean.AmsStorageDir amsd,
		com.soaplat.amsmgr.bean.AmsStorageClass amsc 
		where amspr.progfileid = :progfileid 
		and amsc.stclasscode = :stclasscode 
		and pmf.progfileid = amspr.progfileid 
		and amspr.stdirglobalid = amsd.stdirglobalid 
		and amsc.stclassglobalid = amsg.stclassglobalid 
		and amsg.stglobalid = amspr.stglobalid 
		]]>
	</query>
	
	<!-- Edited by Andy at 20100118 10:59 -->
	<!-- 根据文件ID 和 存储体等级，查询，得到文件存放目标路径 -->
	<!-- HuangBo update by 2011年8月10日 15时28分 增加排序 -->
	<query name="select_SourcePathByProgfileidStclasscodeWithoutProgramFiles">
		<![CDATA[
		select amsg,amspr,amsd,amsc 
		from com.soaplat.amsmgr.bean.AmsStorage amsg,
		com.soaplat.amsmgr.bean.AmsStoragePrgRel amspr,
		com.soaplat.amsmgr.bean.AmsStorageDir amsd,
		com.soaplat.amsmgr.bean.AmsStorageClass amsc 
		where amspr.progfileid = :progfileid 
		and amsc.stclasscode = :stclasscode 
		and amspr.stdirglobalid = amsd.stdirglobalid 
		and amsc.stclassglobalid = amsg.stclassglobalid 
		and amsg.stglobalid = amspr.stglobalid order by amspr.inputtime desc
		]]>
	</query>
	
	<!-- Edited by Andy at 20100121 10:55 -->
	<!-- 根据文件ID 和 存储体等级，查询，得到文件存放目标路径 -->
	<query name="select_SourcePathByProgfileidStclasscodeProductidWithoutProgramFiles">
		<![CDATA[
		select amsg,amspr,amsd,amsc 
		from com.soaplat.amsmgr.bean.AmsStorage amsg,
		com.soaplat.amsmgr.bean.AmsStoragePrgRel amspr,
		com.soaplat.amsmgr.bean.AmsStorageDir amsd,
		com.soaplat.amsmgr.bean.AmsStorageClass amsc 
		where amspr.progfileid = :progfileid 
		and amsc.stclasscode = :stclasscode 
		and amspr.stdirglobalid = amsd.stdirglobalid 
		and amsc.stclassglobalid = amsg.stclassglobalid 
		and amsg.stglobalid = amspr.stglobalid 
		and amspr.prglobalid = :productid 
		]]>
	</query>
	
	<!-- Edited by Andy at 20100115 16:02 -->
	<!-- 根据节目包id、filecode，查询packagefiles、programfiles表，得到file -->
	<query name="select_ProgramFilesesByProductidFilecode">
		<![CDATA[
		select pmf 
		from ProgramFiles pmf, PackageFiles ppf 
		where ppf.productid = :productid 
		and ppf.progfileid = pmf.progfileid 
		and pmf.filecode = :filecode 
		]]>
	</query>
	
	<!-- Edited by Andy at 20100115 16:07 -->
	<!-- 根据节目包id 和 主文件表示(progrank)，查询packagefiles、programfiles表，得到节目包的文件 -->
	<query name="select_ProgramFilesesByProductidProgrank">
		<![CDATA[
		select pmf 
		from ProgramFiles pmf, PackageFiles ppf 
		where ppf.productid = :productid 
		and ppf.progfileid = pmf.progfileid 
		and pmf.progrank = :progrank 
		order by pmf.progfileid
		]]>
	</query>
	
	<!-- Edited by Andy at 20100119 11:58 -->
	<!-- 根据date、栏目的defcatseq、filetype，查询proglistfile，得到ProgListFile列表 		and plf.state1 = 0 -->
	<query name="select_ProgListFilesByDateFiletypeDefcatseq">
		<![CDATA[
		select plf,pc 
		from ProgListFile plf, PortalColumn pc 
		where plf.scheduledate = :scheduledate 
		and plf.filetype = :filetype 
		and plf.columnclassid = pc.columnclassid 
		and pc.defcatseq like :defcatseq 
		]]>
	</query>
	
	<!-- Edited by Andy at 20100223 15:44 -->
	<!-- 根据节目包和栏目，查询栏目单详细 -->
	<query name="select_ProgListDetailsByProductidColumnclassid">
		<![CDATA[
		select pld 
		from ProgListDetail pld 
		where pld.productid = :productid 
		and pld.columnclassid = :columnclassid 
		]]>
	</query>
	
	<!-- Edited by Andy at 20100223 15:44 -->
	<!-- 根据节目包和栏目，查询栏目单详细 -->
	<query name="select_JsRulesByDefcatcode">
		<![CDATA[
		select pjr 
		from PortalJsRules pjr 
		where pjr.defcatcode = :defcatcode 
		order by pjr.sequence
		]]>
	</query>
	
	<!-- Edited by Andy at 20100223 15:44 -->
	<!-- 根据节目包和栏目，查询栏目单详细 -->
	<query name="select_JsRulesByDatatypeDefcatcode">
		<![CDATA[
		select pjr 
		from PortalJsRules pjr 
		where pjr.datatype = :datatype 
		and pjr.defcatcode = :defcatcode 
		and pjr.ismetdata = 1 
		order by pjr.sequence
		]]>
	</query>
	
	<!-- Edited by Andy at 20100414 18:01 -->
	<!-- 查询图文记录（TPORTALPACKAGE），根据名称、栏目ID、上下线标识 -->
	<query name="select_PortalPackagesByNameColumnclassidOnlinetag">
		<![CDATA[
		select ptp 
		from PortalPackage ptp 
		where ptp.ptpname like :ptpname 
		and ptp.columnclassid = :columnclassid 
		and ptp.onlinetag = :onlinetag 
		order by ptp.ptpid
		]]>
	</query>
	
	<!-- Edited by Andy at 20100419 13:16 -->
	<!-- 查询图文记录（TPORTALPACKAGE），根据栏目ID、上下线标识 -->
	<query name="select_PortalPackagesByColumnclassidOnlinetag">
		<![CDATA[
		select ptp 
		from PortalPackage ptp 
		where ptp.columnclassid = :columnclassid 
		and ptp.onlinetag = :onlinetag 
		order by ptp.ptpid
		]]>
	</query>
	
	<!-- Edited by Andy at 20100415 11:57 -->
	<!-- 查询（PtpPgpRel），根据ID、节目包ID -->
	<query name="select_PtpPgpRelsByPtpidProductid">
		<![CDATA[
		select ptppgprel 
		from PtpPgpRel ptppgprel 
		where ptppgprel.ptpid = :ptpid 
		and ptppgprel.productid = :productid 
		order by ptppgprel.epicodeid
		]]>
	</query>
	
	<!-- Edited by Andy at 20100416 11:29 -->
	<!-- 查询页面包装，根据节目包ID、栏目ID -->
	<query name="select_PortalPackagesByProductidColumnclassid">
		<![CDATA[
		select ptp, ppr 
		from PortalPackage ptp, PtpPgpRel ppr 
		where ppr.productid = :productid 
		and ptp.columnclassid = :columnclassid 
		and ptp.ptpid = ppr.ptpid 
		order by ppr.epicodeid
		]]>
	</query>
	
	<!-- Edited by Andy at 20100416 11:29 -->
	<!-- 查询节目包，根据页面包装ID、栏目ID -->
	<query name="select_ProgPackagesByPtpidColumnclassid">
		<![CDATA[
		select pp,ppr 
		from PortalPackage ptp, PtpPgpRel ppr, ProgPackage pp 
		where ppr.ptpid = :ptpid 
		and ptp.columnclassid = :columnclassid 
		and ptp.ptpid = ppr.ptpid 
		and ppr.productid = pp.productid 
		order by ppr.epicodeid
		]]>
	</query>
	
	<!-- Edited by Andy at 20100419 13:24 -->
	<!-- 查询节目包，根据节目包名称、栏目id -->
	<query name="select_ProgPackagesByProductnameColumnclassid">
		<![CDATA[
		select pp,pld 
		from ProgPackage pp, ProgListDetail pld 
		where pp.productid = pld.productid 
		and pp.productname like :productname 
		and pld.columnclassid = :columnclassid 
		order by pp.productname,pp.epicodeid
		]]>
	</query>
	
	<!-- Edited by Andy at 20100419 13:29 -->
	<!-- 查询节目包，根据栏目id -->
	<query name="select_ProgPackagesByColumnclassidOrderbyproductname">
		<![CDATA[
		select pp,pld 
		from ProgPackage pp, ProgListDetail pld 
		where pp.productid = pld.productid 
		and pld.columnclassid = :columnclassid 
		order by pp.productname,pp.epicodeid
		]]>
	</query>
	
	<!-- Edited by Andy at 20100422 22:14 -->
	<!-- 查询页面包装和节目包关系记录，根据页面包装 -->
	<query name="select_PtpPgpRelsByPortalPackage">
		<![CDATA[
		select ptp 
		from PtpPgpRel ptp 
		where ptp.ptpid = :ptpid 
		order by ptp.epicodeid
		]]>
	</query>
	
	<!-- Edited by Andy at 20100521 10:41 -->
	<!-- 查询文件位置表记录 -->
	<query name="getAmsStoragePrgRels">
		<![CDATA[
		select aspr 
		from AmsStoragePrgRel aspr 
		where aspr.stglobalid = :stglobalid 
		and aspr.stdirglobalid = :stdirglobalid 
		and aspr.prglobalid = :prglobalid 
		and aspr.ftypeglobalid = :ftypeglobalid 
		and aspr.filename = :filename 
		and aspr.progfileid = :progfileid
		and aspr.filepath = :filepath
		order by aspr.relid
		]]>
	</query>
	
	<!-- Edited by Andy at 20100521 13:23 -->
	<!-- 查询节目包的文件，根据节目包id和filetype -->
	<query name="getProgramFilesesByProductidFiletype">
		<![CDATA[
		select pgf 
		from PackageFiles pkf, ProgramFiles pgf 
		where pkf.productid = :productid 
		and pkf.progfileid = pgf.progfileid 
		and pgf.filetypeid = :filetypeid 
		]]>
	</query>
	
	<!-- Edited by Andy at 20100522 17:34 -->
	<!-- 查询关系，根据样式id和栏目code -->
	<query name="getPackStylePortalColumnsByStyleidDefcatcode">
		<![CDATA[
		select pspc 
		from PackStylePortalColumn pspc 
		where pspc.styleid = :styleid 
		and pspc.defcatcode = :defcatcode
		]]>
	</query>
	
	<!-- Edited by Andy at 20100608 15:36 -->
	<!-- 查询关系，根据样式id和栏目code -->
	<query name="getProgramfilesByProductid">
		<![CDATA[
		select pgf 
		from PackageFiles pkf, ProgramFiles pgf 
		where pkf.productid = :productid 
		and pkf.progfileid = pgf.progfileid 
		order by pgf.filecode
		]]>
	</query>
	<!-- Edited by Andy at 20100610 11:25 -->
	<!-- 根据日期查询加扰任务 -->
	<query name="getEncryptListByDate">
		<![CDATA[
		select enc 
		from EncryptList enc 
		where enc.inputtime >= :from 
		and enc.inputtime <= :to 
		order by enc.encryptid
		]]>
	</query>
	
	<!-- Edited by Andy at 20100610 11:25 -->
	<!-- 根据节目包ID、节目包名称和日期查询加扰任务 -->
	<query name="getEncryptListByProductidProductnameDate">
		<!-- 
			/**
			 * HuangBo update by 2011年4月13日 9时48分
			 * 修改productid为模糊查询
			 */ 
		-->
		<![CDATA[
		select enc 
		from EncryptList enc 
		where enc.productid like :productid 
		and enc.productname like :productname 
		and enc.inputtime >= :from 
		and enc.inputtime <= :to 
		order by enc.encryptid
		]]>
	</query>
	
	<!-- Edited by Andy at 20100610 11:25 -->
	<!-- 根据节目包ID和日期查询加扰任务 -->
	<query name="getEncryptListByProductidDate">
		<!-- 
			/**
			 * HuangBo update by 2011年4月13日 9时48分
			 * 修改productid为模糊查询
			 */ 
		-->
		<![CDATA[
		select enc 
		from EncryptList enc 
		where enc.productid like :productid 
		and enc.inputtime >= :from 
		and enc.inputtime <= :to 
		order by enc.encryptid
		]]>
	</query>
	
	<!-- Edited by Andy at 20100610 11:25 -->
	<!-- 根据节目包名称和日期查询加扰任务 -->
	<query name="getEncryptListByProductnameDate">
		<![CDATA[
		select enc 
		from EncryptList enc 
		where enc.productname like :productname 
		and enc.inputtime >= :from 
		and enc.inputtime <= :to 
		order by enc.encryptid
		]]>
	</query> 
	
	<!-- Edited by Andy at 20100202 16:04 -->
    <!-- // 根据存储体等级code和filecode，查存储体和目录 -->
	<query name="select_StorageStoragedirsByStclasscodeFilecode">
		<![CDATA[
		select asg, asd, ascs 
		from com.soaplat.amsmgr.bean.AmsStorage asg,
		com.soaplat.amsmgr.bean.AmsStorageDir asd,
		com.soaplat.amsmgr.bean.AmsStorageClass ascs 
		where ascs.stclasscode = :stclasscode 
		and ascs.stclassglobalid = asg.stclassglobalid 
		and asg.stglobalid = asd.stglobalid 
		and asd.filecode = :filecode 
		]]>
	</query>
	
	<query name="select_storageanddirlistbystorageclass">
		<![CDATA[
		select asg.stglobalid,
		asg.storagename,
		asg.storageip,
		asg.storageaccstype,
		asg.loginname,
		asg.loginpwd,
		asg.mappath,
		asg.maploginuid,
		asg.maploginpwd,
		asg.maplogindisk,
		asg.totalcap,
		asg.districtid,
		asg.storagevalid,
		asd.storagedirname,
		asd.dirtotalcap,
		asd.diralarmcap,
		asd.dirfreecap,
		asd.dirvalid,
		asd.stdirglobalid 
		from com.soaplat.amsmgr.bean.AmsStorage asg,com.soaplat.amsmgr.bean.AmsStorageDir asd ,
		com.soaplat.amsmgr.bean.AmsStorageClass ascs 
		where asg.stglobalid =asd.stglobalid 
		and ascs.stclassglobalid = asg.stclassglobalid 
		and ascs.stclasscode = :stclasscode 
		and asd.filecode = :filecode
		]]>
	</query>
	

	
	<!-- Editing ends. -->
	<!-- ====================== Bunco ========================= -->
	
	<!-- 查询关系，根据样式id和栏目code -->
	<query name="query.proglistfile.by.date.and.filetype">
		<![CDATA[
			from ProgListFile as p where p.scheduledate between :before and :end and p.filetype = :fileType and p.state1 = 0 order by p.scheduledate
		]]>
	</query>
	
	<!-- 查询播发单播发日期 -->
	<query name="query.proglistfile.by.scheduledate.and.filetype">
		<![CDATA[
			select p.date4 from ProgListFile as p where p.scheduledate = :schedule and p.filetype = :fileType and p.state1 = 0 order by p.scheduledate
		]]>
	</query>
	
	<query name="query.proglistmang.by.date">
		<![CDATA[
			select p, f from ProgListMang as p, FlowAction as f where p.scheduledate >= :before and p.scheduledate < :end and p.idAct <> :act and p.idAct = f.actionid order by p.scheduledate
		]]>
	</query>
	
	<query name="query.AmsStorage.AmsStorageClass.by.storageClassId">
		<![CDATA[
			select 
					s, sc
			
			from 	AmsStorage as s,
					AmsStorageClass as sc
					
			where 	sc.stclassglobalid = :storageClassId
					and s.stclassglobalid = sc.stclassglobalid
		]]>
	</query>
	
	<!-- 根据存储体ID查询 -->
	<query name="query.ProgramFiles.by.storageId">
		<![CDATA[
			select 
					spr, pf, sd
			
			from 	AmsStoragePrgRel as spr,
					ProgramFiles as pf,
					AmsStorageDir as sd
					
			where 	spr.stglobalid = :storageId
					and spr.inputtime between :startInputTime and :endInputTime
					and spr.progfileid = pf.progfileid
					and spr.stdirglobalid = sd.stdirglobalid
			order by spr.prglobalid, spr.ftypeglobalid
		]]>
	</query>
	
	<!-- 根据存储体ID查询 -->
	<query name="query.ProgramFiles.by.storageId2">
		<![CDATA[
			select 
					spr, pf, sd
			
			from 	AmsStoragePrgRel as spr,
					ProgramFiles as pf,
					AmsStorageDir as sd
					
			where 	spr.stglobalid = :storageId
					and spr.progfileid = pf.progfileid
					and spr.stdirglobalid = sd.stdirglobalid
			order by spr.prglobalid, spr.ftypeglobalid
		]]>
	</query>
	
	<!-- 根据存储体ID查询 -->
	<query name="query.ProgPackage.by.programFileId">
		<![CDATA[
			select 
					pp.productid, 
					pp.productname,
					pp.state,
					pp.dealstate
			
			from 	ProgPackage as pp,
					PackageFiles as pf
					
			where 	pf.progfileid = :programFileId
					and pf.productid = pp.productid
		]]>
	</query>
	
	<!-- update 2010年7月31日 8时12分 -->
	<!-- 根据存储体ID查询 -->
	<query name="query.ProgListDetail.by.progPackageId">
		<![CDATA[
			select 
					pld.proglistdetailid,
					pld.validFrom,
					pld.validTo
			
			from 	ProgListDetail as pld
					
			where 	pld.productid = :progPackageId
		
			order by pld.validTo desc
		]]>
	</query>
	
	<!-- 根据存储体ID, 文件名查询位置表记录 -->
	<query name="query.AmsStoragePrgRel.by.storageId.fileName">
		<![CDATA[
			select 
					spr
			
			from 	AmsStoragePrgRel as spr
					
			where 	spr.stglobalid = :storageId
					and spr.filename = :fileName
		]]>
	</query>
	
	<!-- 查询历史表中当前ID最大值 -->
	<query name="query.AmsStorageHistory.max.ID">
		<![CDATA[
			select 
					max(a.id)
			
			from 	AmsStorageHistory as a
					
		]]>
	</query>
	
	<!-- 查询指定存储等级的文件删除策略 -->
	<query name="query.AmsStoragePolicy.by.storageClassID">
		<![CDATA[
			from AmsStoragePolicy as a where a.scgId = :storageClassID and a.validTag = 'Y' order by a.inputTime desc
		]]>
	</query>
	
	<!-- 查询所有有效存储等级 -->
	<query name="query.AmsStorageClass.by.validate">
		<![CDATA[
			from AmsStorageClass as a where a.storagevalid = '是' order by a.stclassname
		]]>
	</query>
	
	<!-- 根据节目包ID 查询节目包文件关系记录 -->
	<query name="query.PackageFiles.by.ProgPackage.id">
		<![CDATA[
			from PackageFiles as a where a.productid = :progPackageID
		]]>
	</query>
	
	<!-- 根据节目ID 查询节目文件在存储体的绝对路径  -->
	<query name="query.AmsStorage.AmsStorageDir.AmsStoragePrgRel.ProgramFiles.by.programInfoID">
		<![CDATA[
			select
				s, sd, sr, pf
			from
				AmsStorage as s,
				AmsStorageDir as sd,
				AmsStoragePrgRel as sr,
				ProgramFiles as pf
			where 
					pf.programid = :programInfoID
				and pf.filetypeid = 'H264'
				and sr.progfileid = pf.progfileid
				and sr.stglobalid = s.stglobalid
				and sr.stdirglobalid = sd.stdirglobalid
		]]>
	</query>
	
	<!-- 查询报纸的两个栏目, 现不灵活, 写死  -->
	<query name="query.PortalColumn.by.portalColumnName">
		<![CDATA[
			from PortalColumn as p where p.columnname like '%电子报纸'
		]]>
	</query>
	
	<!-- 根据样式名称查询样式信息 -->
	<query name="query.PackStyle.by.packStyleName">
		<![CDATA[
			from PackStyle as p where p.stylename = :styleName
		]]>
	</query>
	
	<!-- 根据节目包ID列表, 查询该列表中所有节目包信息 -->
	<query name="query.ProgPackage.by.IDs">
		<![CDATA[
			from ProgPackage as p where p.productid in (:progPackageIDs)
		]]>
	</query>
	
	
	
	
	<!-- 以下方法适用于cms1.2版 -->
	
	<!-- 20100921 11:08 -->
	<!-- 根据编单日期和栏目id，查询栏目的编单（ProgListDetail） -->
	<query name="getProgListDetailsByScheduledateColumnclassid">
		<![CDATA[
			select pld 
			from ProgListDetail pld 
			where pld.scheduledate = :scheduledate 
			and pld.columnclassid = :columnclassid 
			order by pld.lnum
		]]>
	</query>
	
	<!-- 20100921 15:48 -->
	<!-- 根据品牌code、validtag、叶子节点，查询栏目 -->
	<query name="getPortalColumnsBySitecodeValidtagIsleaf">
		<![CDATA[
			select pc 
			from PortalColumn pc 
			where pc.siteCode = :siteCode 
			and pc.validFlag = :validFlag 
			and pc.isleaf = :isleaf 
			order by pc.displayorder, pc.columnclassid
		]]>
	</query>
	
	<!-- 20101105 10:02 -->
	<!-- 根据文件id、存储等级id，查询文件位置表记录 -->
	<query name="getAmsStoragePrgRelsByProgfileidStclasscode">
		<![CDATA[
			select aspr 
			from AmsStoragePrgRel aspr 
			where aspr.progfileid = :progfileid 
			and aspr.stglobalid = :stglobalid 
			order by aspr.relid
		]]>
	</query>

	<!-- Edited by Andy at 20110107 17:19 -->
	<!-- 根据文件ID 和 存储体等级，查询，得到文件存放目标路径 -->
	<query name="select_SourcePathByProgfileidStclasscodeProductidFiletypeWithoutProgramFiles">
		<![CDATA[
		select amsg,amspr,amsd,amsc 
		from com.soaplat.amsmgr.bean.AmsStorage amsg,
		com.soaplat.amsmgr.bean.AmsStoragePrgRel amspr,
		com.soaplat.amsmgr.bean.AmsStorageDir amsd,
		com.soaplat.amsmgr.bean.AmsStorageClass amsc 
		where amspr.progfileid = :progfileid 
		and amsc.stclasscode = :stclasscode 
		and amspr.stdirglobalid = amsd.stdirglobalid 
		and amsc.stclassglobalid = amsg.stclassglobalid 
		and amsg.stglobalid = amspr.stglobalid 
		and amspr.prglobalid = :productid 
		and amspr.ftypeglobalid = :ftypeglobalid 
		]]>
	</query>
	
	<!-- Edited by Andy at 20110107 17:19 -->
	<!-- 根据文件ID 和 存储体等级，查询，得到文件存放目标路径 -->
	<query name="select_SourcePathByProgfileidStclasscodeFiletypeWithoutProgramFiles">
		<!-- HuangBo update by 2011年3月25日 17时26分 -->
		<!-- 增加排序 根据位置表时间反排序  order by amspr.inputtime desc -->
		<![CDATA[
		select amsg,amspr,amsd,amsc 
		from com.soaplat.amsmgr.bean.AmsStorage amsg,
		com.soaplat.amsmgr.bean.AmsStoragePrgRel amspr,
		com.soaplat.amsmgr.bean.AmsStorageDir amsd,
		com.soaplat.amsmgr.bean.AmsStorageClass amsc 
		where amspr.progfileid = :progfileid 
		and amsc.stclasscode = :stclasscode 
		and amspr.stdirglobalid = amsd.stdirglobalid 
		and amsc.stclassglobalid = amsg.stclassglobalid 
		and amsg.stglobalid = amspr.stglobalid 
		and amspr.ftypeglobalid = :ftypeglobalid order by amspr.inputtime desc
		]]>
	</query>
	
	<!-- Edited by Andy at 20110113 10:55 -->
	<!-- 根据品牌code和编单日期，查询，得到文件存放目标路径 -->
	<query name="getProgListDeleteDetailsBySitecodeScheduledate">
		<![CDATA[
		select pl 
		from ProgListDeleteDetail pl  
		where (pl.siteCode = :siteCode or pl.siteCode is null) 
		and pl.scheduleDate = :scheduleDate 
		order by pl.scheduleDate, pl.progPackageId 
		]]>
	</query>
	
	<!-- Edited by Andy at 20110114 10:33 -->
	<!-- 根据文件ID 和 存储体等级，查询，得到文件存放目标路径 -->
	<query name="getProgListDeleteDetailsByScheduledate">
		<![CDATA[
		select pl 
		from ProgListDeleteDetail pl  
		where pl.scheduleDate = :scheduleDate 
		order by pl.scheduleDate, pl.progPackageId 
		]]>
	</query>
	
	<!-- Edited by Andy at 20110124 12:31 -->
	<!-- 根据日期、filetype、有效标识、文件名，查询ProgListFile -->
	<query name="getProgListFilesByScheduledateFiletypeState1Filename">
		<![CDATA[
		select pld 
		from ProgListFile pld  
		where pld.scheduledate = :scheduledate 
		and pld.filetype = :filetype 
		and pld.state1 = :state1 
		and pld.filename = :filename 
		order by pld.columnfileid 
		]]>
	</query>
	
	
</hibernate-mapping>


